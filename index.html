<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Punjabi Calligraphy Poster Maker</title>

<style>
body{font-family:sans-serif;text-align:center;background:#e8def0;}

@font-face{font-family:"Raavi";src:url("raavi.ttf");}
@font-face{font-family:"Anmol";src:url("anmol.ttf");}
@font-face{font-family:"Asees";src:url("asees.ttf");}
@font-face{font-family:"Gurblipi";src:url("gurblipi.ttf");}

textarea{width:90%;height:80px;font-size:18px;margin:10px;border-radius:8px;padding:5px;}
select,input,button{margin:5px;padding:6px;border-radius:6px;}
button{background:#5b2ea3;color:white;border:none;}
canvas{border:2px solid black;margin-top:10px;background:white;}
</style>
</head>

<body>

<h2>Punjabi Calligraphy Poster Maker</h2>

<textarea id="textInput" placeholder="ਇੱਥੇ ਪੰਜਾਬੀ ਲਿਖੋ..."></textarea><br>

<select id="fontSelect">
<option value="Raavi">Raavi</option>
<option value="Anmol">Anmol</option>
<option value="Asees">Asees</option>
<option value="Gurblipi">Gurblipi</option>
<option value="Noto Serif Gurmukhi">Noto Serif</option>
</select>

Text <input type="color" id="textColor" value="#000000">
BG <input type="color" id="bgColor" value="#ffffff"><br>

Font Size <input type="range" id="fontSize" min="20" max="150" value="50">
Shadow <input type="range" id="shadowSize" min="0" max="20" value="0"><br>

Align
<select id="align">
<option value="left">Left</option>
<option value="center">Center</option>
<option value="right">Right</option>
</select>

<button onclick="toggleBold()">Bold</button>
<button onclick="toggleUnderline()">Underline</button><br>

Border Color <input type="color" id="borderColor" value="#000000">
Border Size <input type="range" id="borderSize" min="0" max="20" value="0"><br>

<button onclick="drawText()">Convert</button>
<button onclick="undo()">Undo</button>
<button onclick="clearCanvas()">Delete</button>
<button onclick="saveImage()">Save</button>
<button onclick="shareImage()">Share</button>
<button onclick="printImage()">Print</button><br>

<button onclick="zoomIn()">Zoom +</button>
<button onclick="zoomOut()">Zoom -</button>
<button onclick="toggleDraw()">Hand Work ✍</button><br>

<canvas id="canvas" width="400" height="400"></canvas>

<script>
const canvas=document.getElementById("canvas");
const ctx=canvas.getContext("2d");

let bold=false,underline=false,scale=1,drawMode=false,drawing=false;
let history=[];

function saveState(){
history.push(ctx.getImageData(0,0,canvas.width,canvas.height));
}

function undo(){
if(history.length>0){
ctx.putImageData(history.pop(),0,0);
}
}

function toggleBold(){bold=!bold;}
function toggleUnderline(){underline=!underline;}

function drawText(){
saveState();
const text=textInput.value;
const font=fontSelect.value;
const size=fontSize.value;
const tc=textColor.value;
const bg=bgColor.value;
const borderC=borderColor.value;
const borderS=borderSize.value;
const shadow=shadowSize.value;
const align=align.value;

ctx.setTransform(1,0,0,1,0,0);
ctx.clearRect(0,0,canvas.width,canvas.height);
ctx.scale(scale,scale);

ctx.fillStyle=bg;
ctx.fillRect(0,0,canvas.width,canvas.height);

if(borderS>0){
ctx.strokeStyle=borderC;
ctx.lineWidth=borderS;
ctx.strokeRect(0,0,canvas.width,canvas.height);
}

ctx.fillStyle=tc;
ctx.shadowColor="black";
ctx.shadowBlur=shadow;

let style="";
if(bold) style+="bold ";
ctx.font=style+size+"px "+font;

ctx.textAlign=align;
ctx.textBaseline="middle";

let x=canvas.width/2;
if(align=="left") x=10;
if(align=="right") x=canvas.width-10;

wrapText(text,x,canvas.height/2,size+10);

if(underline){
ctx.beginPath();
ctx.moveTo(20,canvas.height/2+size/2);
ctx.lineTo(canvas.width-20,canvas.height/2+size/2);
ctx.strokeStyle=tc;
ctx.lineWidth=2;
ctx.stroke();
}
}

function wrapText(text,x,y,lineHeight){
const lines=text.split("\n");
lines.forEach((line,i)=>{
ctx.fillText(line,x,y+i*lineHeight);
});
}

function clearCanvas(){
saveState();
ctx.clearRect(0,0,canvas.width,canvas.height);
}

function saveImage(){
const link=document.createElement("a");
link.download="poster.png";
link.href=canvas.toDataURL();
link.click();
}

function shareImage(){
canvas.toBlob(blob=>{
const file=new File([blob],"poster.png",{type:"image/png"});
navigator.share({files:[file],title:"Poster"});
});
}

function printImage(){
const w=window.open();
w.document.write("<img src='"+canvas.toDataURL()+"'>");
w.print();
}

function zoomIn(){scale+=0.1;drawText();}
function zoomOut(){scale=Math.max(0.3,scale-0.1);drawText();}

function toggleDraw(){drawMode=!drawMode;}

canvas.addEventListener("pointerdown",e=>{
if(drawMode){drawing=true;ctx.beginPath();ctx.moveTo(e.offsetX,e.offsetY);}
});
canvas.addEventListener("pointermove",e=>{
if(drawMode && drawing){
ctx.lineTo(e.offsetX,e.offsetY);
ctx.strokeStyle=textColor.value;
ctx.lineWidth=3;
ctx.stroke();
}
});
canvas.addEventListener("pointerup",()=>drawing=false);
</script>

</body>
</html>
