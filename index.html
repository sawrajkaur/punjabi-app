<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Punjabi Poster Maker</title>

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Gurmukhi&display=swap" rel="stylesheet">

<style>
@font-face{font-family:"Raavi";src:url("fonts/Raavi.ttf");}
@font-face{font-family:"Gurbilipi";src:url("fonts/Gurbilipi.ttf");}
@font-face{font-family:"Prabhki";src:url("fonts/Prabhki.ttf");}
@font-face{font-family:"Bularah7";src:url("fonts/Bularah7.ttf");}

body{
  font-family:sans-serif;
  background:#efe7ff;
  text-align:center;
  padding:10px;
}

.controls{
  background:white;
  padding:10px;
  border-radius:10px;
}

textarea{
  width:95%;
  height:70px;
  font-size:18px;
}

canvas{
  border:2px solid black;
  margin-top:10px;
  touch-action: manipulation; /* allow pinch zoom */
}

button{
  background:#6a1b9a;
  color:white;
  border:none;
  padding:6px 12px;
  border-radius:6px;
  margin:3px;
}
</style>
</head>

<body>

<h2>Punjabi Calligraphy Poster Maker</h2>

<textarea id="textInput" placeholder="ਇੱਥੇ ਪੰਜਾਬੀ ਲਿਖੋ..."></textarea>

<div class="controls">

Font:
<select id="fontSelect">
  <option value="Raavi">Raavi</option>
  <option value="Gurblipi">Gurblipi</option>
  <option value="Prabhki">Prabhki</option>
  <option value="Bularah7">Bularah7</option>
  <option value="'Noto Serif Gurmukhi',serif">Noto Serif</option>
</select>

Text Color:
<input type="color" id="textColor" value="#000000">

Background Color:
<input type="color" id="bgColor" value="#ffffff"><br>

Font Size:
<input type="range" id="fontSize" min="20" max="150" value="50">

Border Size:
<input type="range" id="borderSize" min="0" max="20" value="2">

Border Color:
<input type="color" id="borderColor" value="#000000"><br>

Align:
<select id="align">
<option value="left">Left</option>
<option value="center">Center</option>
<option value="right">Right</option>
</select>

  Poster Size:
<select id="posterSize" onchange="changePosterSize()">
  <option value="square">Square</option>
  <option value="story">Story</option>
  <option value="a4">A4</option>
</select>

Artwork:
<select id="artwork">
  Poster Size:
<select id="posterSize" onchange="changePosterSize()">
  <option value="square">Square (1:1)</option>
  <option value="story">Story (9:16)</option>
  <option value="a4">A4 (Print)</option>
</select>
<br><br>
<option value="none">None</option>
<option value="gradient">Gradient</option>
<option value="pattern">Pattern</option>
</select><br><br>

<div style="margin-bottom:10px; text-align:center;">
  <button onclick="drawText()">Convert</button>
  <button onclick="clearCanvas()">Delete</button>
  <button onclick="saveImage()">Save</button>
  <button onclick="shareImage()">Share</button>
  <button onclick="printImage()">Print</button>
</div>

<canvas id="canvas" width="400" height="400"></canvas>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

function drawText(){
  const text = document.getElementById("textInput").value;
  const font = document.getElementById("fontSelect").value;
  const size = document.getElementById("fontSize").value;
  const tc = document.getElementById("textColor").value;
  const bg = document.getElementById("bgColor").value;
  const borderC = document.getElementById("borderColor").value;
  const borderS = document.getElementById("borderSize").value;
  const align = document.getElementById("align").value;

  ctx.setTransform(1,0,0,1,0,0);
  ctx.clearRect(0,0,canvas.width,canvas.height);

  ctx.fillStyle = bg;
  ctx.fillRect(0,0,canvas.width,canvas.height);

  if(borderS > 0){
    ctx.strokeStyle = borderC;
    ctx.lineWidth = borderS;
    ctx.strokeRect(0,0,canvas.width,canvas.height);
  }

  ctx.fillStyle = tc;
  ctx.font = size+"px "+font;
  ctx.textAlign = align;

  let x = canvas.width/2;
  if(align=="left") x = 10;
  if(align=="right") x = canvas.width-10;

  let y = 50;
  text.split("\n").forEach(line=>{
    ctx.fillText(line,x,y);
    y += parseInt(size)+10;
  });
}

function clearCanvas(){
  ctx.setTransform(1,0,0,1,0,0);
  ctx.clearRect(0,0,canvas.width,canvas.height);
}

function saveImage(){
  const link = document.createElement("a");
  link.download = "punjabi-poster.png";
  link.href = canvas.toDataURL("image/png");
  link.click();
}

function shareImage(){
  canvas.toBlob(function(blob){
    const file = new File([blob],"poster.png",{type:"image/png"});
    if(navigator.share){
      navigator.share({
        files:[file],
        title:"Punjabi Poster",
        text:"Made with Punjabi Calligraphy App"
      });
    }else{
      alert("Share not supported on this browser");
    }
  });
}

function printImage(){
  const dataUrl = canvas.toDataURL();
  const win = window.open("");
  win.document.write("<img src='"+dataUrl+"' style='width:100%'>");
  win.print();
}
  function changePosterSize(){
  const canvas = document.getElementById("canvas");
  const size = document.getElementById("posterSize").value;

  if(size === "square"){
    canvas.width = 400;
    canvas.height = 400;
  }

  if(size === "story"){
    canvas.width = 360;
    canvas.height = 640;
  }

  if(size === "a4"){
    canvas.width = 794;
    canvas.height = 1123;
  }

  const ctx = canvas.getContext("2d");
  ctx.setTransform(1,0,0,1,0,0);
  ctx.clearRect(0,0,canvas.width,canvas.height);
  }
</script>
  

</body>
</html>
