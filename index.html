<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Punjabi Poster Maker</title>

<link href="https://fonts.googleapis.com/css2?family=Noto+Serif+Gurmukhi:wght@400;700&display=swap" rel="stylesheet">

<style>
@font-face{font-family:"Raavi";src:url("raavi.ttf");}
@font-face{font-family:"Gurblipi";src:url("Gurblipi.ttf");}
@font-face{font-family:"Prabhki";src:url("Prabhki.ttf");}
@font-face{font-family:"Bularah7";src:url("bularah7.ttf");}

body{
  font-family:sans-serif;
  background:#efe7ff;
  text-align:center;
  padding:10px;
}
.controls{
  background:white;
  padding:10px;
  border-radius:10px;
}
textarea{
  width:100%;
  height:70px;
  font-size:18px;
}
select,input,button{
  margin:4px;
  padding:6px;
  border-radius:6px;
}
button{
  background:#6a2ca0;
  color:white;
  border:none;
}
canvas{
  border:2px solid black;
  margin-top:10px;
  background:white;
}
</style>
</head>

<body>

<h2>Punjabi Calligraphy Poster Maker</h2>

<textarea id="textInput" placeholder="ਇੱਥੇ ਪੰਜਾਬੀ ਲਿਖੋ..."></textarea>

<div class="controls">

Font:
<select id="fontSelect">
  <option value="Raavi">Raavi</option>
  <option value="Gurblipi">Gurblipi</option>
  <option value="Prabhki">Prabhki</option>
  <option value="Bularah7">Bularah7</option>
  <option value="'Noto Serif Gurmukhi',serif">Noto Serif</option>
</select>

Text Color:
<input type="color" id="textColor" value="#000000">

Background Color:
<input type="color" id="bgColor" value="#ffffff"><br>

Font Size:
<input type="range" id="fontSize" min="20" max="150" value="50">

Border Size:
<input type="range" id="borderSize" min="0" max="20" value="2">

Border Color:
<input type="color" id="borderColor" value="#000000"><br>

Align:
<select id="align">
<option value="left">Left</option>
<option value="center">Center</option>
<option value="right">Right</option>
</select>

Artwork:
<select id="artwork">
<option value="none">None</option>
<option value="gradient">Gradient</option>
<option value="pattern">Pattern</option>
</select><br><br>

<button onclick="drawText()">Convert</button>
<button onclick="clearCanvas()">Delete</button>
<button onclick="saveImage()">Save</button>
<button onclick="shareImage()">Share</button>
<button onclick="printImage()">Print</button>

</div>

<canvas id="canvas" width="400" height="400"></canvas>

<script>
const canvas=document.getElementById("canvas");
const ctx=canvas.getContext("2d");

function drawBackground(bg,art){
  if(art==="gradient"){
    const g=ctx.createLinearGradient(0,0,canvas.width,canvas.height);
    g.addColorStop(0,bg);
    g.addColorStop(1,"#ddd");
    ctx.fillStyle=g;
  }else if(art==="pattern"){
    ctx.fillStyle=bg;
    ctx.fillRect(0,0,canvas.width,canvas.height);
    ctx.strokeStyle="#ccc";
    for(let i=0;i<canvas.width;i+=20){
      ctx.beginPath();
      ctx.moveTo(i,0);
      ctx.lineTo(i,canvas.height);
      ctx.stroke();
    }
  }else{
    ctx.fillStyle=bg;
  }
  ctx.fillRect(0,0,canvas.width,canvas.height);
}

function drawText(){
  const text=textInput.value;
  const font=fontSelect.value;
  const size=fontSize.value;
  const tc=textColor.value;
  const bg=bgColor.value;
  const borderS=borderSize.value;
  const borderC=borderColor.value;
  const align=alignSelect();
  const art=artwork.value;

  ctx.clearRect(0,0,canvas.width,canvas.height);

  drawBackground(bg,art);

  if(borderS>0){
    ctx.strokeStyle=borderC;
    ctx.lineWidth=borderS;
    ctx.strokeRect(0,0,canvas.width,canvas.height);
  }

  ctx.fillStyle=tc;
  ctx.font=size+"px "+font;
  ctx.textAlign=align;
  ctx.textBaseline="top";

  let x=20;
  if(align==="center") x=canvas.width/2;
  if(align==="right") x=canvas.width-20;

  let y=20;
  text.split("\n").forEach(line=>{
    ctx.fillText(line,x,y);
    y+=parseInt(size)+10;
  });
}

function alignSelect(){
  return document.getElementById("align").value;
}

function clearCanvas(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
}

function saveImage(){
  const a=document.createElement("a");
  a.download="poster.png";
  a.href=canvas.toDataURL();
  a.click();
}

function shareImage(){
  canvas.toBlob(blob=>{
    const file=new File([blob],"poster.png",{type:"image/png"});
    if(navigator.share){
      navigator.share({files:[file],title:"Poster"});
    }else{
      saveImage();
      alert("Share supported ਨਹੀਂ, image download ਹੋ ਗਈ।");
    }
  });
}

function printImage(){
  const w=window.open("");
  w.document.write("<img src='"+canvas.toDataURL()+"' style='width:100%'>");
  w.print();
}
</script>

</body>
</html>
