<!DOCTYPE html>
<html lang="pa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Punjabi Calligraphy App</title>

<link href="https://fonts.googleapis.com/css2?family=Noto+Serif+Gurmukhi&family=Baloo+Paaji+2&display=swap" rel="stylesheet">

<style>
body{
  margin:0;
  font-family: Arial, sans-serif;
  background:linear-gradient(135deg,#ede9ff,#ffffff);
  text-align:center;
}

/* Header */
h1{
  background:linear-gradient(to right,#5a2ca0,#8b5cf6);
  color:white;
  padding:12px;
  margin:0;
  font-size:20px;
}

/* Main card */
.container{
  background:white;
  margin:10px;
  padding:10px;
  border-radius:15px;
  box-shadow:0 4px 10px rgba(0,0,0,0.15);
}

/* Inputs */
textarea{
  width:95%;
  height:70px;
  font-size:18px;
  margin:6px 0;
  border-radius:10px;
  border:1px solid #ccc;
  padding:6px;
}

select,input,button{
  padding:6px;
  margin:4px;
  border-radius:10px;
  border:none;
  background:#5a2ca0;
  color:white;
  font-size:14px;
}

input[type=color]{
  padding:2px;
  height:32px;
}

/* Canvas */
canvas{
  border:2px solid #333;
  margin-top:8px;
  border-radius:12px;
  background:#fff;
  touch-action:none;
}
</style>
</head>

<body>

<h1>Punjabi Calligraphy App</h1>

<div class="container">

<textarea id="textInput" placeholder="ਇੱਥੇ ਪੰਜਾਬੀ ਲਿਖੋ..."></textarea><br>

<select id="fontSelect">
  <option value="Noto Serif Gurmukhi">Noto Serif Gurmukhi</option>
  <option value="Baloo Paaji 2">Baloo Paaji 2</option>
</select><br>

Font Size:
<input type="range" id="fontSize" min="20" max="150" value="50"><br>

Text Color:
<input type="color" id="textColor" value="#000000">

Background:
<input type="color" id="bgColor" value="#ffffff"><br><br>

<button onclick="drawText()">Convert</button>
<button onclick="clearCanvas()">Delete</button>
<button onclick="saveImage()">Save</button>
<button onclick="shareImage()">Share</button><br>

<canvas id="canvas" width="350" height="350"></canvas>

</div>

<script>
const canvas = document.getElementById("canvas");
const ctx = canvas.getContext("2d");

let scale = 1;
let startDist = 0;

document.getElementById("textColor").addEventListener("input", drawText);
document.getElementById("bgColor").addEventListener("input", drawText);
document.getElementById("fontSize").addEventListener("input", drawText);
document.getElementById("fontSelect").addEventListener("change", drawText);

function drawText(){
  const text = document.getElementById("textInput").value;
  const font = document.getElementById("fontSelect").value;
  const size = document.getElementById("fontSize").value;
  const textColor = document.getElementById("textColor").value;
  const bgColor = document.getElementById("bgColor").value;

  // reset transform
  ctx.setTransform(1,0,0,1,0,0);

  // fill full background
  ctx.fillStyle = bgColor;
  ctx.fillRect(0,0,canvas.width,canvas.height);

  // apply zoom
  ctx.setTransform(scale,0,0,scale,0,0);

  ctx.fillStyle = textColor;
  ctx.font = size + "px " + font;
  ctx.textAlign = "center";
  ctx.textBaseline = "middle";

  ctx.fillText(text, canvas.width/(2*scale), canvas.height/(2*scale));
}

function clearCanvas(){
  scale = 1;
  ctx.setTransform(1,0,0,1,0,0);
  ctx.clearRect(0,0,canvas.width,canvas.height);
}

function saveImage(){
  const link = document.createElement("a");
  link.download = "punjabi.png";
  link.href = canvas.toDataURL();
  link.click();
}

function shareImage(){
  canvas.toBlob(blob=>{
    const file = new File([blob],"punjabi.png",{type:"image/png"});
    navigator.share({
      files:[file],
      title:"Punjabi Calligraphy",
      text:"Made with Punjabi Calligraphy App"
    });
  });
}

/* Pinch Zoom */
canvas.addEventListener("touchstart", e=>{
  if(e.touches.length==2){
    startDist = getDist(e.touches[0], e.touches[1]);
  }
});

canvas.addEventListener("touchmove", e=>{
  if(e.touches.length==2){
    let newDist = getDist(e.touches[0], e.touches[1]);
    scale = newDist / startDist;
    drawText();
  }
});

function getDist(t1, t2){
  return Math.hypot(t2.pageX - t1.pageX, t2.pageY - t1.pageY);
}
</script>

</body>
</html>
