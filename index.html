<!DOCTYPE html>
<html lang="pa">
<head>
<meta charset="UTF-8">
<title>Punjabi Calligraphy App</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Serif+Gurmukhi&display=swap" rel="stylesheet">
<style>
body{
  font-family:"Noto Serif Gurmukhi",serif;
  text-align:center;
  background:#f2f2f2;
}
h1{background:#5a2ca0;color:white;padding:10px;}
textarea{width:90%;height:80px;font-size:22px;}
button,select,input{padding:8px;margin:4px;border-radius:8px;}
canvas{border:2px solid black;margin-top:10px;touch-action:none;}
</style>
</head>
<body>

<h1>Punjabi Calligraphy App</h1>

<textarea id="textInput" placeholder="ਇੱਥੇ ਪੰਜਾਬੀ ਲਿਖੋ..."></textarea><br>

<select id="fontSelect">
<option value="Noto Serif Gurmukhi">Noto Serif Gurmukhi</option>
</select>

<button onclick="drawText()">Convert</button>
<button onclick="clearCanvas()">Delete</button>
<button onclick="saveImage()">Save</button>
<button onclick="shareImage()">Share</button><br>

Text Color:
<input type="color" id="textColor" value="#000000">

Background:
<input type="color" id="bgColor" value="#ffffff"><br>

<canvas id="canvas" width="350" height="350"></canvas>

<script>
const canvas=document.getElementById("canvas");
const ctx=canvas.getContext("2d");
let scale=1;
let startDist=0;

function drawText(){
  ctx.setTransform(scale,0,0,scale,0,0);
  ctx.fillStyle=document.getElementById("bgColor").value;
  ctx.fillRect(0,0,canvas.width,canvas.height);

  ctx.fillStyle=document.getElementById("textColor").value;
  ctx.font="30px "+document.getElementById("fontSelect").value;
  ctx.fillText(document.getElementById("textInput").value,20,100);
}

function clearCanvas(){
  ctx.setTransform(1,0,0,1,0,0);
  ctx.clearRect(0,0,canvas.width,canvas.height);
}

function saveImage(){
  let link=document.createElement("a");
  link.download="punjabi.png";
  link.href=canvas.toDataURL();
  link.click();
}

function shareImage(){
  canvas.toBlob(blob=>{
    let file=new File([blob],"punjabi.png",{type:"image/png"});
    navigator.share({
      files:[file],
      title:"Punjabi Calligraphy"
    });
  });
}

/* ZOOM */
canvas.addEventListener("touchstart",e=>{
  if(e.touches.length==2){
    let dx=e.touches[0].clientX-e.touches[1].clientX;
    let dy=e.touches[0].clientY-e.touches[1].clientY;
    startDist=Math.sqrt(dx*dx+dy*dy);
  }
});

canvas.addEventListener("touchmove",e=>{
  if(e.touches.length==2){
    let dx=e.touches[0].clientX-e.touches[1].clientX;
    let dy=e.touches[0].clientY-e.touches[1].clientY;
    let newDist=Math.sqrt(dx*dx+dy*dy);
    scale=newDist/startDist;
    drawText();
  }
});
</script>

</body>
</html>
