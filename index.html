<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Punjabi Calligraphy Poster Maker</title>

<style>
@font-face{font-family:Raavi;src:url(raavi.ttf);}
@font-face{font-family:Gurlipi;src:url(Gurlipi.ttf);}
@font-face{font-family:Prabhki;src:url(Prabhki.ttf);}
@font-face{font-family:Bularah;src:url(bularah7.ttf);}

body{font-family:sans-serif;background:#d8d2da;text-align:center;}
textarea{width:90%;height:80px;font-size:18px;}
canvas{border:2px solid black;margin-top:10px;}
button,select,input{margin:4px;padding:5px;}
</style>
</head>

<body>
<h2>Punjabi Calligraphy Poster Maker</h2>

<textarea id="textInput" placeholder="ਇੱਥੇ ਪੰਜਾਬੀ ਲਿਖੋ..."></textarea><br>

<select id="fontSelect">
<option value="Raavi">Raavi</option>
<option value="Gurlipi">Gurlipi</option>
<option value="Prabhki">Prabhki</option>
<option value="Bularah">Bularah</option>
</select>

<input type="color" id="textColor" value="#000000">
<input type="color" id="bgColor" value="#ffffff"><br>

Font Size <input type="range" id="fontSize" min="20" max="150" value="50">
Shadow <input type="range" id="shadowSize" min="0" max="20" value="0"><br>

Align:
<select id="align">
<option value="left">Left</option>
<option value="center">Center</option>
<option value="right">Right</option>
</select>

<button onclick="toggleBold()">Bold</button>
<button onclick="toggleUnderline()">Underline</button><br>

Border Color <input type="color" id="borderColor" value="#000000">
Border Size <input type="range" id="borderSize" min="0" max="20" value="2"><br><br>

<button onclick="drawText()">Convert</button>
<button onclick="undo()">Undo</button>
<button onclick="clearCanvas()">Delete</button>
<button onclick="saveImage()">Save</button>
<button onclick="shareImage()">Share</button>
<button onclick="window.print()">Print</button><br>

<button onclick="zoomIn()">Zoom +</button>
<button onclick="zoomOut()">Zoom -</button>
<button onclick="toggleDraw()">Hand Work ✍️</button><br>

<canvas id="canvas" width="400" height="400"></canvas>

<script>
const canvas=document.getElementById("canvas");
const ctx=canvas.getContext("2d");

let scale=1;
let bold=false;
let underline=false;
let drawMode=false;
let drawing=false;
let history=[];

function saveState(){
history.push(ctx.getImageData(0,0,canvas.width,canvas.height));
}

function undo(){
if(history.length>0){
ctx.putImageData(history.pop(),0,0);
}
}

function toggleBold(){bold=!bold;drawText();}
function toggleUnderline(){underline=!underline;drawText();}
function zoomIn(){scale+=0.1;drawText();}
function zoomOut(){scale=Math.max(0.2,scale-0.1);drawText();}
function toggleDraw(){drawMode=!drawMode;}

canvas.addEventListener("pointerdown",e=>{
if(drawMode){drawing=true;ctx.beginPath();ctx.moveTo(e.offsetX,e.offsetY);}
});
canvas.addEventListener("pointermove",e=>{
if(drawMode && drawing){
ctx.lineTo(e.offsetX,e.offsetY);
ctx.strokeStyle=textColor.value;
ctx.lineWidth=3;
ctx.stroke();
}
});
canvas.addEventListener("pointerup",()=>drawing=false);

function drawText(){
  const text = document.getElementById("textInput").value;
  const font = document.getElementById("fontSelect").value;
  const size = document.getElementById("fontSize").value;
  const tc = document.getElementById("textColor").value;
  const bg = document.getElementById("bgColor").value;
  const align = document.getElementById("align").value;

  ctx.setTransform(1,0,0,1,0,0);
  ctx.clearRect(0,0,canvas.width,canvas.height);
  ctx.scale(scale,scale);

  // background
  ctx.fillStyle = bg;
  ctx.fillRect(0,0,canvas.width,canvas.height);

  // text
  ctx.fillStyle = tc;
  ctx.font = size + "px " + font;
  ctx.textAlign = align;
  ctx.textBaseline = "top";

  const lines = text.split("\n");
  let y = 20;
  lines.forEach(line=>{
    ctx.fillText(line, canvas.width/2, y);
    y += size + 10;
  });
}
a.width,canvas.height);
function saveImage(){
const a=document.createElement("a");
a.download="poster.png";
a.href=canvas.toDataURL();
a.click();
}

function shareImage(){
canvas.toBlob(blob=>{
const file=new File([blob],"poster.png",{type:"image/png"});
navigator.share({files:[file],title:"Punjabi Poster"});
});
}
</script>
</body>
</html>
